{"remainingRequest":"C:\\Users\\micha\\OneDrive\\Pulpit\\vue\\Vue Home App\\home-application-for-flatmates\\home-app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\micha\\OneDrive\\Pulpit\\vue\\Vue Home App\\home-application-for-flatmates\\home-app\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\micha\\OneDrive\\Pulpit\\vue\\Vue Home App\\home-application-for-flatmates\\home-app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\micha\\OneDrive\\Pulpit\\vue\\Vue Home App\\home-application-for-flatmates\\home-app\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\micha\\OneDrive\\Pulpit\\vue\\Vue Home App\\home-application-for-flatmates\\home-app\\src\\components\\split-panel\\SplitPanel.vue?vue&type=template&id=6792ff10&scoped=true","dependencies":[{"path":"C:\\Users\\micha\\OneDrive\\Pulpit\\vue\\Vue Home App\\home-application-for-flatmates\\home-app\\src\\components\\split-panel\\SplitPanel.vue","mtime":1636712650657},{"path":"C:\\Users\\micha\\OneDrive\\Pulpit\\vue\\Vue Home App\\home-application-for-flatmates\\home-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\micha\\OneDrive\\Pulpit\\vue\\Vue Home App\\home-application-for-flatmates\\home-app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\micha\\OneDrive\\Pulpit\\vue\\Vue Home App\\home-application-for-flatmates\\home-app\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1632349277000},{"path":"C:\\Users\\micha\\OneDrive\\Pulpit\\vue\\Vue Home App\\home-application-for-flatmates\\home-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\micha\\OneDrive\\Pulpit\\vue\\Vue Home App\\home-application-for-flatmates\\home-app\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1632349277000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKdmFyIF93aXRoU2NvcGVJZCA9IGZ1bmN0aW9uIF93aXRoU2NvcGVJZChuKSB7CiAgcmV0dXJuIF9wdXNoU2NvcGVJZCgiZGF0YS12LTY3OTJmZjEwIiksIG4gPSBuKCksIF9wb3BTY29wZUlkKCksIG47Cn07Cgp2YXIgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogIlNwbGl0UGFuZWwiCn07Cgp2YXIgX2hvaXN0ZWRfMiA9IC8qI19fUFVSRV9fKi9fd2l0aFNjb3BlSWQoZnVuY3Rpb24gKCkgewogIHJldHVybiAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgewogICAgY2xhc3M6ICJzcGxpdC10aXRsZSIKICB9LCBbLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImgxIiwgbnVsbCwgIiBTcGxpdCBQYW5lbCAiKV0sIC0xCiAgLyogSE9JU1RFRCAqLwogICk7Cn0pOwoKdmFyIF9ob2lzdGVkXzMgPSB7CiAgY2xhc3M6ICJhZGQtYmlsbHMiCn07CnZhciBfaG9pc3RlZF80ID0gewogIGNsYXNzOiAibWVtYmVycy1kZXRhaWxzIgp9Owp2YXIgX2hvaXN0ZWRfNSA9IHsKICBjbGFzczogImJpbGxzLWxpc3QiCn07Cgp2YXIgX2hvaXN0ZWRfNiA9IC8qI19fUFVSRV9fKi9fd2l0aFNjb3BlSWQoZnVuY3Rpb24gKCkgewogIHJldHVybiAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaDIiLCBudWxsLCAiIE5ldyBCaWxscyAiLCAtMQogIC8qIEhPSVNURUQgKi8KICApOwp9KTsKCnZhciBfaG9pc3RlZF83ID0gewogIGNsYXNzOiAiYmlsbHMtdG8tcGF5Igp9OwoKdmFyIF9ob2lzdGVkXzggPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKGZ1bmN0aW9uICgpIHsKICByZXR1cm4gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImgyIiwgbnVsbCwgIiBCaWxscyB0byBwYXkgIiwgLTEKICAvKiBIT0lTVEVEICovCiAgKTsKfSk7CgpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHZhciBfY29tcG9uZW50X0FkZEJpbGwgPSBfcmVzb2x2ZUNvbXBvbmVudCgiQWRkQmlsbCIpOwoKICB2YXIgX2NvbXBvbmVudF9NZW1iZXJzRGV0YWlscyA9IF9yZXNvbHZlQ29tcG9uZW50KCJNZW1iZXJzRGV0YWlscyIpOwoKICB2YXIgX2NvbXBvbmVudF9NeUJpbGxzID0gX3Jlc29sdmVDb21wb25lbnQoIk15QmlsbHMiKTsKCiAgdmFyIF9jb21wb25lbnRfQmlsbHNUb0dpdmVCYWNrID0gX3Jlc29sdmVDb21wb25lbnQoIkJpbGxzVG9HaXZlQmFjayIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2hvaXN0ZWRfMiwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMywgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X0FkZEJpbGwsIHsKICAgIG9uR2V0QmlsbDogJG9wdGlvbnMuR2V0QmlsbCwKICAgIG9uU2hvd01lbWJlcnM6ICRvcHRpb25zLlNob3dNZW1iZXJzLAogICAgTWVtYmVyc1RvU3BsaXQ6ICRkYXRhLk1lbWJlcnNUb1NwbGl0LAogICAgTWVtYmVyc0NvdW50VmFsdWU6ICRkYXRhLk1lbWJlcnNDb3VudFZhbHVlCiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbIm9uR2V0QmlsbCIsICJvblNob3dNZW1iZXJzIiwgIk1lbWJlcnNUb1NwbGl0IiwgIk1lbWJlcnNDb3VudFZhbHVlIl0pXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzQsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9NZW1iZXJzRGV0YWlscywgewogICAgb25HZXRNZW1iZXJzOiAkb3B0aW9ucy5HZXRNZW1iZXJzLAogICAgcmVmOiAiTWVtYmVyc0RldGFpbHMiLAogICAgRmxhdFVzZXJzVG9TZW5kOiAkZGF0YS5GbGF0VXNlcnNUb1NlbmQKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsib25HZXRNZW1iZXJzIiwgIkZsYXRVc2Vyc1RvU2VuZCJdKV0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF81LCBbX2hvaXN0ZWRfNiwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfTXlCaWxscywgewogICAgb25SZW1vdmVCaWxsOiAkb3B0aW9ucy5SZW1vdmVCaWxsLAogICAgQmlsbHNMaXN0OiAkZGF0YS5OZXdCaWxsc1RvU2VuZCwKICAgIGRlYnRUb01lOiAkZGF0YS5kZWJ0VG9NZSwKICAgIHJlZjogIk15QmlsbHMiCiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbIm9uUmVtb3ZlQmlsbCIsICJCaWxsc0xpc3QiLCAiZGVidFRvTWUiXSldKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNywgW19ob2lzdGVkXzgsIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X0JpbGxzVG9HaXZlQmFjaywgewogICAgQmlsbHNMaXN0VG9QYXk6ICRkYXRhLkJpbGxzVG9QYXkKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsiQmlsbHNMaXN0VG9QYXkiXSldKV0pOwp9"},{"version":3,"sources":["C:\\Users\\micha\\OneDrive\\Pulpit\\vue\\Vue Home App\\home-application-for-flatmates\\home-app\\src\\components\\split-panel\\SplitPanel.vue"],"names":[],"mappings":";;;;;;;AAES,EAAA,KAAK,EAAC;;;;sBACP,mBAAA,CAEM,KAFN,EAEM;AAFD,IAAA,KAAK,EAAC;AAEL,GAFN,EAAwB,C,aACxB,mBAAA,CAAsB,IAAtB,EAAsB,IAAtB,EAAI,eAAJ,CADwB,CAAxB,E;;AAAA,G;;;;AAIK,EAAA,KAAK,EAAC;;;AAIN,EAAA,KAAK,EAAC;;;AAIL,EAAA,KAAK,EAAC;;;;sBACR,mBAAA,CAAoB,IAApB,EAAoB,IAApB,EAAI,aAAJ,EAAe,CAAA;AAAA;AAAf,G;;;;AAIC,EAAA,KAAK,EAAC;;;;sBACP,mBAAA,CAAuB,IAAvB,EAAuB,IAAvB,EAAI,gBAAJ,EAAkB,CAAA;AAAA;AAAlB,G;;;;;;;;;;;;uBAnBR,mBAAA,CAwBM,KAxBN,EAAA,UAAA,EAwBM,CAvBF,UAuBE,EAnBF,mBAAA,CAEM,KAFN,EAAA,UAAA,EAEM,CADF,YAAA,CAAgI,kBAAhI,EAAgI;AAAtH,IAAA,SAAO,EAAE,QAAA,CAAA,OAA6G;AAAnG,IAAA,aAAW,EAAE,QAAA,CAAA,WAAsF;AAAxE,IAAA,cAAc,EAAE,KAAA,CAAA,cAAwD;AAAvC,IAAA,iBAAiB,EAAE,KAAA,CAAA;AAAoB,GAAhI,E,IAAA,E;;AAAA,I,qEAAA,CACE,CAFN,CAmBE,EAfF,mBAAA,CAEM,KAFN,EAAA,UAAA,EAEM,CADF,YAAA,CAAkG,yBAAlG,EAAkG;AAAjF,IAAA,YAAU,EAAE,QAAA,CAAA,UAAqE;AAAzD,IAAA,GAAG,EAAC,gBAAqD;AAAnC,IAAA,eAAe,EAAE,KAAA,CAAA;AAAkB,GAAlG,E,IAAA,E;;AAAA,I,mCAAA,CACE,CAFN,CAeE,EAXD,mBAAA,CAGK,KAHL,EAAA,UAAA,EAGK,CAFF,UAEE,EADL,YAAA,CAAkG,kBAAlG,EAAkG;AAAxF,IAAA,YAAU,EAAE,QAAA,CAAA,UAA4E;AAA/D,IAAA,SAAS,EAAE,KAAA,CAAA,cAAoD;AAAnC,IAAA,QAAQ,EAAE,KAAA,CAAA,QAAyB;AAAf,IAAA,GAAG,EAAC;AAAW,GAAlG,E,IAAA,E;;AAAA,I,yCAAA,CACK,CAHL,CAWC,EANF,mBAAA,CAGM,KAHN,EAAA,UAAA,EAGM,CAFF,UAEE,EADL,YAAA,CAAiD,0BAAjD,EAAiD;AAA9B,IAAA,cAAc,EAAE,KAAA,CAAA;AAAc,GAAjD,EAA6C,IAA7C,EAA6C;AAAA;AAA7C,IAA6C,CAAA,gBAAA,CAA7C,CACK,CAHN,CAME,CAxBN,C","sourcesContent":["<template>\r\n\r\n    <div class=\"SplitPanel\">\r\n        <div class=\"split-title\">\r\n        <h1> Split Panel </h1>\r\n        </div>\r\n            \r\n        <div class=\"add-bills\">\r\n            <AddBill @GetBill=\"GetBill\" @ShowMembers=\"ShowMembers\" :MembersToSplit=\"MembersToSplit\" :MembersCountValue=\"MembersCountValue\"/>\r\n        </div>\r\n\r\n        <div class=\"members-details\">\r\n            <MembersDetails @GetMembers=\"GetMembers\" ref='MembersDetails' :FlatUsersToSend=\"FlatUsersToSend\"/>\r\n        </div>\r\n\r\n         <div class=\"bills-list\">\r\n            <h2> New Bills </h2>\r\n         <MyBills @RemoveBill=\"RemoveBill\" :BillsList=\"NewBillsToSend\" :debtToMe=\"debtToMe\" ref='MyBills'/>\r\n        </div>\r\n\r\n        <div class=\"bills-to-pay\">\r\n            <h2> Bills to pay </h2>\r\n         <BillsToGiveBack  :BillsListToPay=\"BillsToPay\" />\r\n        </div>\r\n\r\n       \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport AddBill from './AddBill.vue'\r\nimport MyBills from './MyBills.vue'\r\nimport MembersDetails from './MembersDetails.vue'\r\nimport BillsToGiveBack from './BillsToGiveBack.vue'\r\nexport default{\r\n\r\n    components:{\r\n        AddBill,\r\n        MyBills,\r\n        MembersDetails,\r\n        BillsToGiveBack,\r\n       \r\n    },\r\n    data() {\r\n        return{\r\n       BillsList:[],\r\n       NewBillsToSend:[],\r\n       BillsToPay:[],\r\n       FlatUsersToSend:[],\r\n       debtToMe:0,\r\n       MembersToSplit: null,\r\n       MembersCountValue:\"\"\r\n        }\r\n \r\n    },\r\n \r\n    methods:{\r\n        GetBill(Bill){\r\n    \r\n       this.NewBillsToSend = this.NewBillsToSend.concat(Bill)\r\n   let sum = this.NewBillsToSend\r\n    .map(x => parseInt( x.owMeCount))\r\n    .filter(x => !isNaN(x))\r\n    .reduce((x, y) => x + y, 0); //sumoanie\r\n   this.debtToMe = sum\r\n         //console.log(\"sum: \"+ sum);\r\n        // console.log(this.NewBillsToSend[0])\r\n        //this.debtToMe = this.debtToMe + Bill.owMeCount\r\n        //console.log(this.NewBillsToSend[2].title)\r\n       \r\n       // suma owtome z lsity do debttome\r\n\r\n       \r\n        },\r\n\r\n        GetMembers(MembersCount,MembersCountValue){\r\n        this.MembersToSplit = MembersCount;\r\n        this.MembersCountValue= MembersCountValue\r\n        },\r\n\r\n        ShowMembers(){\r\n            this.$refs.MembersDetails.ShowMembers()\r\n        },\r\n\r\n        RemoveBill(bill){\r\n         const loadedEmail =  localStorage.getItem('emailStore')\r\n         \r\n            if(bill.membersValues.includes(loadedEmail))\r\n            {\r\n                this.debtToMe = this.debtToMe - ((bill.price/bill.members) * (bill.members-1))\r\n            }\r\n\r\n            else{\r\n                this.debtToMe = this.debtToMe - bill.price\r\n            }\r\n           \r\n            this.BillsList.splice(this.BillsList.indexOf(bill), 1);\r\n           \r\n            \r\n        },\r\n\r\n        async loadDuty(){\r\n            const response = await axios.get('http://localhost:4000/app/splitGet');\r\n          \r\n            const loadedEmail =  localStorage.getItem('emailStore')\r\n          \r\n        let dbBills = response.data.filter(e => e.email === loadedEmail)\r\n        this.NewBillsToSend = this.NewBillsToSend.concat(dbBills)\r\n      //console.log(this.NewBillsToSend)\r\n   let sum = this.NewBillsToSend.map(x => parseInt( x.owMeCount)).filter(x => !isNaN(x)).reduce((x, y) => x + y, 0);\r\n   this.debtToMe = sum\r\n             \r\n       },\r\n\r\n\r\n        async loadUsers(){\r\n            const response = await axios.get('http://localhost:4000/app/signupGet');\r\n            const loadedFlatId =  localStorage.getItem('flatIdStore')\r\n          \r\n   \r\n        let array = [...response.data]\r\n        let dbFlats = array.filter(e => e.flatId === loadedFlatId)\r\n        //console.log(loadedFlatId)\r\n\r\n        //this.FlatUsersToSend.push(dbFlats)\r\n        \r\n        this.FlatUsersToSend = this.FlatUsersToSend.concat(dbFlats)\r\n\r\n        //console.log(array)\r\n        // console.log(dbFlats)\r\n          // this.FlatUsersToSend = dbFlats\r\n       },\r\n\r\n\r\n        // my bills to send to other users\r\n            async loadMyBillsToPay(){\r\n            const response = await axios.get('http://localhost:4000/app/splitGet');\r\n          \r\n            const loadedEmail=localStorage.getItem('emailStore')\r\n          \r\n        let dbBillsToPay = response.data.filter(e => e.email !== loadedEmail)  //all bills created by other users\r\n        \r\n      \r\nconsole.log(dbBillsToPay)\r\n\r\n        for(let i=0; i<dbBillsToPay.length;i++ ){\r\n            if(dbBillsToPay[i].membersValues[0].includes(loadedEmail)){\r\n               \r\n                this.BillsToPay = this.BillsToPay.concat(dbBillsToPay[i])\r\n             \r\n                 \r\n            }\r\n        }\r\n\r\n             \r\n       },\r\n\r\n\r\n\r\n\r\n\r\n\r\n    },\r\n\r\n      mounted(){\r\n        \r\n        this.loadDuty()\r\n        this.loadUsers()\r\n        this.loadMyBillsToPay()\r\n    }\r\n\r\n    }\r\n\r\n</script>\r\n \r\n\r\n<style scoped>\r\n.SplitPanel{\r\n    width: 100%;\r\n    height: 80%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n\r\n}\r\n\r\n.add-bills{\r\n height: 20%;\r\n width: 60%;\r\n\r\n}\r\n\r\n.bills-list{\r\n    height:40%;\r\n    width: 90%;\r\n    text-align: center;\r\n \r\n}\r\n\r\n.bills-to-pay{\r\n    height:50%;\r\n    width: 90%;\r\n    text-align: center;\r\n}\r\n\r\n</style>"],"sourceRoot":""}]}